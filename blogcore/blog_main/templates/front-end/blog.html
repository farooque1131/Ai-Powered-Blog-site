{%extends 'base.html'%}
{%load static%}
{%block body%}
	<!-- Menu -->
		{% include "front-end/menu.html" %}

	<!-- Main -->
		<div id="main">
			<div class="inner">
				<h1>Blog</h1>

				<div class="image main">
					<img src="{%static 'images/banner-image-3-1920x500.jpg' %}" class="img-fluid" alt="" />
				</div>
				
				<div class="container-fluid">
					<div class="row">
						<div class="col-9">
							<div class="row">
								{% if page_obj%}
									{% for b in page_obj %}
			
									<div class="col-sm-6 text-center">
										<img src="{{ b.post_image.url }}" class="img-fluid" alt="" style="width:353.969px; height:185.031px" />

										<h2 class="m-n"><a href="{% url 'blog_detail' b.slug %}">{{b.title}}</a></h2>

										<p> <a href="{% url 'profile' %}">{{ b.user.username}}</a> &nbsp;|&nbsp; {{ b.published_date|date:"d/m/Y H:i" }}</p>
									</div>
						
									{%endfor%}
									
							</div>
							<div class="col-12 mt-4 text-center">
								<nav aria-label="Page navigation">
									<ul class="pagination justify-content-center">
										{% if page_obj.has_previous %}
											<li class="page-item">
												<a class="page-link" href="?page={{ page_obj.previous_page_number }}">Previous</a>
											</li>
										{% else %}
											<li class="page-item disabled">
												<span class="page-link">Previous</span>
											</li>
										{% endif %}

										{% for num in page_obj.paginator.page_range %}
											{% if page_obj.number == num %}
												<li class="page-item active">
													<span class="page-link">{{ num }}</span>
												</li>
											{% else %}
												<li class="page-item">
													<a class="page-link" href="?page={{ num }}">{{ num }}</a>
												</li>
											{% endif %}
										{% endfor %}

										{% if page_obj.has_next %}
											<li class="page-item">
												<a class="page-link" href="?page={{ page_obj.next_page_number }}">Next</a>
											</li>
										{% else %}
											<li class="page-item disabled">
												<span class="page-link">Next</span>
											</li>
										{% endif %}
								{%else%}
									 <!-- If no results -->
									<div class="col-12 text-center">
										<h3>No results found for "{{ search }}"</h3>
									</div>
								{%endif%}			
									</ul>
								</nav>
							</div>
						</div>
						

						<div class="col-3">
							<div class="form-group">
								<h4>Blog Search</h4>
							</div>

							<form method="GET">
							<div class="input-group">
								<input type="text" name="search" value="{{ search }}" 
									class="form-control" placeholder="Search">
								<button type="submit" class="btn btn-outline-secondary">
									<i class="fa fa-search"></i>
								</button>
							</div>
							</form>

							<br>
							
					{% for post in recommended_posts %}
					<p>
						<a href="{% url 'blog_detail' post.slug %}">
						{{ post.title|truncatewords:8 }}
						</a>
					</p>
					{% empty %}
					<p>No recommendations yet.</p>
					{% endfor %}

						</div>
					</div>
				</div>
			</div>
		</div>
{%endblock%}